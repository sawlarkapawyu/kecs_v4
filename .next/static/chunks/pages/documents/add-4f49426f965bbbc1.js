(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[155],{7324:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/documents/add",function(){return s(114)}])},114:function(e,t,s){"use strict";s.r(t);var l=s(5893),a=s(7294),r=s(7293),n=s(1163),o=s(4053),i=s(5934);let c=()=>{(0,n.useRouter)();let[e,t]=(0,a.useState)(!1),s=(0,o.useSupabaseClient)();(0,o.useUser)();let[c,d]=(0,a.useState)(!0),[m,u]=(0,a.useState)([]),[x,p]=(0,a.useState)(""),[g,h]=(0,a.useState)(null),[f,y]=(0,a.useState)(""),[w,j]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=async()=>{try{let{data:e,error:t}=await s.from("categories").select("id, name");if(t)throw t;let l=e.map(e=>({label:e.name,value:e.id}));j(l)}catch(e){console.error("Error fetching categories:",e)}};e()},[]),(0,a.useEffect)(()=>{let e=async()=>{let{data:e,error:t}=await s.from("documents").select("\n            title,\n            categories (name),\n            file_url\n            ");t?console.log("error",t):u(e)};e()},[]);let b=e=>{h(e.target.files[0])},v=async e=>{e.preventDefault();let t=g.name.split("."),l=t[t.length-1],a="".concat((0,i.Z)(),".").concat(l),{error:r}=await s.storage.from("documents").upload(a,g);if(r){console.log("error uploading document",r);return}let{data:n,error:o}=await s.from("documents").insert([{title:x,category_id:f,file_url:a}]);if(console.log(n),o)throw o},N=async e=>{try{let{data:t,error:l}=await s.storage.from("documents").download(e);if(l){console.log("error downloading document",l);return}let a=window.URL.createObjectURL(new Blob([t])),r=document.createElement("a");r.href=a,r.setAttribute("download",e),document.body.appendChild(r),r.click()}catch(e){console.log("error downloading document",e)}},_=async e=>{try{let{data:t,error:l}=await s.storage.from("documents").download(e);if(l){console.log("error downloading document",l);return}let a=new Blob([t],{type:"application/pdf"}),r=URL.createObjectURL(a);window.open(r)}catch(e){console.log("error downloading document",e)}},C=async e=>{let{error:t}=await s.from("documents").delete().eq("id",e);if(t){console.log("error deleting document",t);return}u(m.filter(t=>t.id!==e))};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(r.Z,{children:[(0,l.jsx)("section",{className:"pt-40 pb-12 -mt-24 bg-blueGray-100",children:(0,l.jsxs)("div",{className:"container",children:[(0,l.jsx)("h1",{className:"mb-5 text-2xl font-bold lg:text-5xl wow animate__animated animate__fadeIn animated",children:"Legal Resources"}),(0,l.jsxs)("ul",{className:"flex pb-12 text-sm text-gray-500 lg:text-sm wow animate__animated animate__fadeIn animated",children:[(0,l.jsxs)("li",{className:"inline-flex items-center",children:[(0,l.jsx)("a",{href:"#",className:"text-gray-800 hover:text-blue-500",children:"Home"}),(0,l.jsx)("svg",{fill:"currentColor",viewBox:"0 0 20 20",className:"w-auto h-5 text-gray-300",children:(0,l.jsx)("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})})]}),(0,l.jsxs)("li",{className:"inline-flex items-center",children:[(0,l.jsx)("a",{href:"#",className:"text-gray-800 hover:text-blue-500",children:"Document"}),(0,l.jsx)("svg",{fill:"currentColor",viewBox:"0 0 20 20",className:"w-auto h-5 text-gray-300",children:(0,l.jsx)("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})})]}),(0,l.jsx)("li",{className:"inline-flex items-center text-gray-400",children:(0,l.jsx)("span",{children:"Testing"})})]})]})}),(0,l.jsx)("section",{className:"pt-12",children:(0,l.jsx)("div",{className:"container py-4 mx-auto",children:(0,l.jsx)("div",{className:"flex flex-wrap",children:(0,l.jsxs)("div",{className:"w-full space-y-12",children:[(0,l.jsxs)("form",{onSubmit:v,children:[(0,l.jsxs)("div",{className:"py-2",children:[(0,l.jsx)("label",{htmlFor:"documentTitle",children:"Name:"}),(0,l.jsx)("input",{type:"text",id:"documentTitle",value:x,onChange:e=>p(e.target.value),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset  sm:text-sm sm:leading-6"})]}),(0,l.jsxs)("div",{className:"py-2",children:[(0,l.jsx)("label",{htmlFor:"documentCategory",children:"Category:"}),(0,l.jsxs)("select",{id:"documentCategory",value:f,onChange:e=>y(e.target.value),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset  sm:text-sm sm:leading-6",children:[(0,l.jsx)("option",{value:"",children:"Select a category"}),w.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,l.jsxs)("div",{className:"py-2",children:[(0,l.jsx)("label",{htmlFor:"documentUrl",children:"File:"}),(0,l.jsx)("input",{type:"file",id:"documentUrl",onChange:b,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset  sm:text-sm sm:leading-6"})]}),(0,l.jsx)("button",{type:"submit",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Create Document"})]}),(0,l.jsx)("div",{className:"flow-root mt-8",children:(0,l.jsx)("div",{className:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,l.jsx)("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0",children:"No"}),(0,l.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Title"}),(0,l.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Category"}),(0,l.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"View"}),(0,l.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Download"}),(0,l.jsx)("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-0",children:(0,l.jsx)("span",{className:"sr-only",children:"Delete"})})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-gray-200",children:m.map((e,t)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-0",children:t+1}),(0,l.jsx)("td",{className:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-0",children:e.title}),(0,l.jsx)("td",{className:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap",children:e.categories.name}),(0,l.jsx)("td",{className:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap",children:(0,l.jsx)("button",{onClick:()=>_(e.file_url),children:"View"})}),(0,l.jsx)("td",{className:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap",children:(0,l.jsx)("button",{onClick:()=>N(e.file_url),children:"Download"})}),(0,l.jsx)("td",{className:"relative py-4 pl-3 pr-4 text-sm font-medium text-right whitespace-nowrap sm:pr-0",children:(0,l.jsx)("a",{href:"#",className:"text-indigo-600 hover:text-indigo-900",children:(0,l.jsx)("button",{onClick:()=>C(e.id),children:"Delete"})})})]},e.id))})]})})})})]})})})})]})})};t.default=c},5934:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var l,a=new Uint8Array(16);function r(){if(!l&&!(l="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(a)}for(var n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,o=[],i=0;i<256;++i)o.push((i+256).toString(16).substr(1));var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase();if(!("string"==typeof s&&n.test(s)))throw TypeError("Stringified UUID is invalid");return s},d=function(e,t,s){var l=(e=e||{}).random||(e.rng||r)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,t){s=s||0;for(var a=0;a<16;++a)t[s+a]=l[a];return t}return c(l)}}},function(e){e.O(0,[449,590,293,774,888,179],function(){return e(e.s=7324)}),_N_E=e.O()}]);