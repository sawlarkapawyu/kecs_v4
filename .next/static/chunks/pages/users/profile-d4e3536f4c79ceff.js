(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[529],{2391:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/profile",function(){return t(1767)}])},1767:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return g}});var s=t(5893),l=t(7294),r=t(7293),i=t(1664),n=t.n(i),o=t(4053);function d(e){let{uid:a,url:t,size:r,onUpload:i}=e,n=(0,o.useSupabaseClient)(),[d,u]=(0,l.useState)(null),[c,m]=(0,l.useState)(!1);async function p(e){try{let{data:a,error:t}=await n.storage.from("avatars").download(e);if(t)throw t;let s=URL.createObjectURL(a);u(s)}catch(e){console.log("Error downloading image: ",e)}}(0,l.useEffect)(()=>{t&&p(t)},[t]);let g=async e=>{try{if(m(!0),!e.target.files||0===e.target.files.length)throw Error("You must select an image to upload.");let t=e.target.files[0],s=t.name.split(".").pop(),l="".concat(a,".").concat(s),r="".concat(l),{error:o}=await n.storage.from("avatars").upload(r,t,{upsert:!0});if(o)throw o;i(r)}catch(e){alert("Error uploading avatar!"),console.log(e)}finally{m(!1)}};return(0,s.jsxs)("div",{children:[d?(0,s.jsx)("img",{src:d,alt:"Avatar",className:"avatar image",style:{height:r,width:r}}):(0,s.jsx)("div",{className:"avatar no-image",style:{height:r,width:r}}),(0,s.jsxs)("div",{style:{width:r},children:[(0,s.jsx)("label",{className:"block button primary",htmlFor:"single",children:c?"Uploading ...":"Upload"}),(0,s.jsx)("input",{style:{visibility:"hidden",position:"absolute"},type:"file",id:"single",accept:"image/*",onChange:g,disabled:c})]})]})}var u=t(4926);function c(e){let{session:a}=e,t=(0,o.useSupabaseClient)(),r=(0,o.useUser)(),[i,c]=(0,l.useState)(!0),[m,p]=(0,l.useState)(null),[g,x]=(0,l.useState)(null),[h,f]=(0,l.useState)(null),[b,y]=(0,l.useState)(null);async function _(){try{c(!0);let{data:e,error:a,status:s}=await t.from("profiles").select("username, full_name, website, avatar_url").eq("id",r.id).single();if(a&&406!==s)throw a;e&&(p(e.username),x(e.full_name),f(e.website),y(e.avatar_url))}catch(e){alert("Error loading user data!"),console.log(e)}finally{c(!1)}}async function v(e){let{username:a,full_name:s,website:l,avatar_url:i}=e;try{c(!0);let e={id:r.id,username:a,full_name:s,website:l,avatar_url:i,updated_at:new Date().toISOString()},{error:n}=await t.from("profiles").upsert(e);if(n)throw n;alert("Profile updated!")}catch(e){alert("Error updating the data!"),console.log(e)}finally{c(!1)}}return(0,l.useEffect)(()=>{_()},[a]),(0,s.jsx)("div",{className:"space-y-10 divide-y divide-gray-900/10",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-x-8 gap-y-8 md:grid-cols-3",children:[(0,s.jsxs)("div",{className:"px-4 sm:px-0",children:[(0,s.jsx)("h2",{className:"text-base font-semibold leading-7 text-gray-900",children:"User Profile"}),(0,s.jsx)("p",{className:"mt-1 text-sm leading-6 text-gray-600",children:"Auth UI is a pre-built React component for authenticating users. It supports custom themes and extensible styles to match your brand and aesthetic."}),(0,s.jsxs)("ul",{className:"py-10",children:[(0,s.jsxs)("li",{className:"flex items-center py-3",children:[(0,s.jsx)(u.SK8,{className:"w-5 h-5 mr-2 text-blueGray-400"}),(0,s.jsx)(n(),{href:"/users/dashboard",legacyBehavior:!0,children:(0,s.jsx)("a",{className:"text-sm text-blueGray-600 hover:text-blueGray-500",children:"Dashboard"})})]}),(0,s.jsxs)("li",{className:"flex items-center py-3",children:[(0,s.jsx)(u.avF,{className:"w-5 h-5 mr-2 text-blueGray-400"}),(0,s.jsx)(n(),{href:"/users/profile",legacyBehavior:!0,children:(0,s.jsx)("a",{className:"text-sm text-blueGray-600 hover:text-blueGray-500",children:"Profile"})})]}),(0,s.jsxs)("li",{className:"flex items-center py-3",children:[(0,s.jsx)(u.kb8,{className:"w-5 h-5 mr-2 text-blueGray-400"}),(0,s.jsx)(n(),{href:"/company_registration",legacyBehavior:!0,children:(0,s.jsx)("a",{className:"text-sm text-blueGray-600 hover:text-blueGray-500",children:"Company Registration"})})]}),(0,s.jsxs)("li",{className:"flex items-center py-3",children:[(0,s.jsx)(u.wZ5,{className:"w-5 h-5 mr-2 text-blueGray-400"}),(0,s.jsx)(n(),{href:"/business_registration",legacyBehavior:!0,children:(0,s.jsx)("a",{className:"text-sm text-blueGray-600 hover:text-blueGray-500",children:"Business Registration"})})]}),(0,s.jsxs)("li",{className:"flex items-center py-3",children:[(0,s.jsx)(u.srI,{className:"w-5 h-5 mr-2 text-blueGray-400"}),(0,s.jsx)(n(),{href:"#",legacyBehavior:!0,children:(0,s.jsx)("a",{className:"text-sm text-blueGray-600 hover:text-blueGray-500",children:"Business License Registration"})})]})]})]}),(0,s.jsxs)("form",{className:"shadow-sm bg-gray-50 ring-1 ring-gray-200 sm:rounded-xl md:col-span-2",children:[(0,s.jsx)("div",{className:"px-4 py-6 sm:p-8",children:(0,s.jsxs)("div",{className:"grid max-w-2xl grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:[(0,s.jsx)("div",{class:"col-span-full relative",children:(0,s.jsx)("div",{class:"absolute top-0 right-0",children:(0,s.jsx)(d,{uid:r.id,url:b,size:150,onUpload:e=>{y(e),v({username:m,website:h,avatar_url:e})}})})}),(0,s.jsxs)("div",{className:"sm:col-span-4",children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Email address"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("input",{id:"email",type:"text",value:a.user.email,disabled:!0,autoComplete:"email",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,s.jsxs)("div",{className:"sm:col-span-4",children:[(0,s.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium leading-6 text-gray-900",children:"Username"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("input",{type:"text",name:"username",id:"username",value:m||"",onChange:e=>p(e.target.value),autoComplete:"given-name",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,s.jsxs)("div",{className:"sm:col-span-4",children:[(0,s.jsx)("label",{htmlFor:"full_name",className:"block text-sm font-medium leading-6 text-gray-900",children:"Full name"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("input",{type:"text",name:"full_name",id:"full_name",value:g||"",onChange:e=>x(e.target.value),autoComplete:"full_name",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,s.jsxs)("div",{className:"sm:col-span-4",children:[(0,s.jsx)("label",{htmlFor:"website",className:"block text-sm font-medium leading-6 text-gray-900",children:"Website"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsxs)("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-blue-600 sm:max-w-md",children:[(0,s.jsx)("span",{className:"flex items-center pl-3 text-gray-500 select-none sm:text-sm",children:"http://"}),(0,s.jsx)("input",{type:"url",name:"website",id:"website",value:h||"",onChange:e=>f(e.target.value),className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6",placeholder:"www.example.com"})]})})]})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-end px-4 py-4 border-t gap-x-6 border-gray-900/10 sm:px-8",children:[(0,s.jsx)("button",{type:"button",onClick:()=>t.auth.signOut(),className:"text-sm font-semibold leading-6 text-gray-900",children:"Sign Out"}),(0,s.jsx)("button",{onClick:()=>v({username:m,full_name:g,website:h,avatar_url:b}),disabled:i,className:"px-3 py-2 text-sm font-semibold text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600",children:i?"Loading ...":"Update"})]})]})]})})}t(8139);var m=t(1163);let p=()=>{let e=(0,o.useSession)();(0,o.useSupabaseClient)();let a=(0,m.useRouter)();return(0,l.useEffect)(()=>{e||a.push("/login")},[e,a]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(r.Z,{children:[(0,s.jsx)("section",{className:"pt-40 pb-12 -mt-24 bg-blueGray-100",children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("h1",{className:"mb-5 text-2xl font-bold lg:text-4xl wow animate__animated animate__fadeIn animated",children:"User Profile"}),(0,s.jsxs)("ul",{className:"flex pb-12 text-sm text-gray-500 lg:text-sm wow animate__animated animate__fadeIn animated",children:[(0,s.jsxs)("li",{className:"inline-flex items-center",children:[(0,s.jsx)("a",{href:"#",className:"text-gray-800 hover:text-blue-500",children:"Home"}),(0,s.jsx)("svg",{fill:"currentColor",viewBox:"0 0 20 20",className:"w-auto h-5 text-gray-300",children:(0,s.jsx)("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})})]}),(0,s.jsx)("li",{className:"inline-flex items-center text-gray-400",children:(0,s.jsx)("span",{children:"User Profile"})})]})]})}),(0,s.jsx)("section",{className:"py-20",children:(0,s.jsx)("div",{className:"container",children:e?(0,s.jsx)(c,{session:e}):null})})]})})};var g=p},8139:function(e,a,t){"use strict";t.d(a,{KJ:function(){return n},TS:function(){return d},XK:function(){return u},en:function(){return c},nk:function(){return r},rD:function(){return l}});var s,l={default:{colors:{brand:"hsl(153 60.0% 53.0%)",brandAccent:"hsl(154 54.8% 45.1%)",brandButtonText:"white",defaultButtonBackground:"white",defaultButtonBackgroundHover:"#eaeaea",defaultButtonBorder:"lightgray",defaultButtonText:"gray",dividerBackground:"#eaeaea",inputBackground:"transparent",inputBorder:"lightgray",inputBorderHover:"gray",inputBorderFocus:"gray",inputText:"black",inputLabelText:"gray",inputPlaceholder:"darkgray",messageText:"gray",messageTextDanger:"red",anchorTextColor:"gray",anchorTextHoverColor:"darkgray"},space:{spaceSmall:"4px",spaceMedium:"8px",spaceLarge:"16px",labelBottomMargin:"8px",anchorBottomMargin:"4px",emailInputSpacing:"4px",socialAuthSpacing:"4px",buttonPadding:"10px 15px",inputPadding:"10px 15px"},fontSizes:{baseBodySize:"13px",baseInputSize:"14px",baseLabelSize:"14px",baseButtonSize:"14px"},fonts:{bodyFontFamily:"ui-sans-serif, sans-serif",buttonFontFamily:"ui-sans-serif, sans-serif",inputFontFamily:"ui-sans-serif, sans-serif",labelFontFamily:"ui-sans-serif, sans-serif"},borderWidths:{buttonBorderWidth:"1px",inputBorderWidth:"1px"},radii:{borderRadiusButton:"4px",buttonBorderRadius:"4px",inputBorderRadius:"4px"}},dark:{colors:{brandButtonText:"white",defaultButtonBackground:"#2e2e2e",defaultButtonBackgroundHover:"#3e3e3e",defaultButtonBorder:"#3e3e3e",defaultButtonText:"white",dividerBackground:"#2e2e2e",inputBackground:"#1e1e1e",inputBorder:"#3e3e3e",inputBorderHover:"gray",inputBorderFocus:"gray",inputText:"white",inputPlaceholder:"darkgray"}}},r={SIGN_IN:"sign_in",SIGN_UP:"sign_up",FORGOTTEN_PASSWORD:"forgotten_password",MAGIC_LINK:"magic_link",UPDATE_PASSWORD:"update_password"},i={ROOT:"root",SIGN_IN:r.SIGN_IN,SIGN_UP:r.SIGN_UP,FORGOTTEN_PASSWORD:r.FORGOTTEN_PASSWORD,MAGIC_LINK:r.MAGIC_LINK,UPDATE_PASSWORD:r.UPDATE_PASSWORD,anchor:"ui-anchor",button:"ui-button",container:"ui-container",divider:"ui-divider",input:"ui-input",label:"ui-label",loader:"ui-loader",message:"ui-message"};function n(e,a,t){var s,l;let r=[],n=i[e];return r.push((null==t?void 0:t.prependedClassName)?(null==t?void 0:t.prependedClassName)+"_"+n:"supabase-auth-ui_"+n),(null==(s=null==t?void 0:t.className)?void 0:s[e])&&r.push(null==(l=null==t?void 0:t.className)?void 0:l[e]),((null==t?void 0:t.extend)===void 0||(null==t?void 0:t.extend)===!0)&&r.push(a),r}var o=((s=o||{})[s.horizontal=0]="horizontal",s[s.vertical=1]="vertical",s);function d(e,...a){let t=a.length;for(let s=0;s<t;s++)e=function e(a,t){let s;if(a&&t&&"object"==typeof a&&"object"==typeof t){if(Array.isArray(t))for(s=0;s<t.length;s++)a[s]=e(a[s],t[s]);else for(s in t)a[s]=e(a[s],t[s]);return a}return t}(e,a[s]);return e}function u(e,a){return e.replace(/{{(\w+)}}/g,(e,t)=>a.hasOwnProperty(t)?a[t]:e)}var c={sign_up:{email_label:"Email address",password_label:"Create a Password",email_input_placeholder:"Your email address",password_input_placeholder:"Your password",button_label:"Sign up",loading_button_label:"Signing up ...",social_provider_text:"Sign in with {{provider}}",link_text:"Don't have an account? Sign up",confirmation_text:"Check your email for the confirmation link"},sign_in:{email_label:"Email address",password_label:"Your Password",email_input_placeholder:"Your email address",password_input_placeholder:"Your password",button_label:"Sign in",loading_button_label:"Signing in ...",social_provider_text:"Sign in with {{provider}}",link_text:"Already have an account? Sign in"},magic_link:{email_input_label:"Email address",email_input_placeholder:"Your email address",button_label:"Send Magic Link",loading_button_label:"Sending Magic Link ...",link_text:"Send a magic link email",confirmation_text:"Check your email for the magic link"},forgotten_password:{email_label:"Email address",password_label:"Your Password",email_input_placeholder:"Your email address",button_label:"Send reset password instructions",loading_button_label:"Sending reset instructions ...",link_text:"Forgot your password?",confirmation_text:"Check your email for the password reset link"},update_password:{password_label:"New password",password_input_placeholder:"Your new password",button_label:"Update password",loading_button_label:"Updating password ...",confirmation_text:"Your password has been updated"}}}},function(e){e.O(0,[449,590,293,774,888,179],function(){return e(e.s=2391)}),_N_E=e.O()}]);