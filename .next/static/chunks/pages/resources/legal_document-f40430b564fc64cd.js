(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[208],{5974:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/resources/legal_document",function(){return a(8756)}])},3796:function(e,t,a){"use strict";var l=a(5893),s=a(7857),n=a(3082),r=a.n(n);t.Z=function(e){let{count:t,time:a}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(s.ZP,{end:t,duration:a,children:e=>{let{countUpRef:t,start:a}=e;return(0,l.jsx)(r(),{onChange:a,delayedCall:!0,children:(0,l.jsx)("span",{ref:t,children:"count"})})}})})}},8756:function(e,t,a){"use strict";a.r(t);var l=a(5893),s=a(7293);a(3796);var n=a(7294),r=a(4053),i=a(1163);let d=()=>{(0,i.useRouter)();let e=(0,r.useSupabaseClient)(),[t,a]=(0,n.useState)([]),[d,c]=(0,n.useState)(""),[o,m]=(0,n.useState)(""),[x,u]=(0,n.useState)(""),[h,p]=(0,n.useState)(""),[f,g]=(0,n.useState)(!1),[y,j]=(0,n.useState)(""),[b,N]=(0,n.useState)([]),[v,w]=(0,n.useState)([]);async function _(){g(!0),j(null);let{data:t,error:l}=await e.from("legal_document").select("\n            id, \n            title, \n            issue_date,\n            doc_url,\n            legal_type (id, name),\n            department (id, name)\n        ").order("created_at",{ascending:!1});l?j(l.message):a(t),g(!1)}async function C(){let{data:t,error:a}=await e.from("legal_type").select("*");a?j(a.message):N(t)}async function L(){let{data:t,error:a}=await e.from("department").select("*");a?j(a.message):w(t)}(0,n.useEffect)(()=>{_(),C(),L()},[]);let S=b.map(e=>(0,l.jsx)("option",{value:e.name,children:e.name},e.name)),D=v.map(e=>(0,l.jsx)("option",{value:e.name,children:e.name},e.name)),k=(function(){let e=t;if(""!==d&&(e=e.filter(e=>e.title.toLowerCase().includes(d.toLowerCase())||e.legal_type.name.toLowerCase().includes(d.toLowerCase())||e.department.name.toLowerCase().includes(d.toLowerCase())||e.issue_date.toLowerCase().includes(d.toLowerCase()))),""!==o&&(e=e.filter(e=>e.legal_type.name===o)),""!==x&&(e=e.filter(e=>e.department.name===x)),""!==h){let t=h.split("-"),a=new Date(t[0],t[1]-1,t[2]),l=new Date(a.getTime()+864e5);e=e.filter(e=>new Date(e.issue_date)>=a&&new Date(e.issue_date)<l)}return e})().map((e,t)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0",children:t+1}),(0,l.jsx)("td",{className:"px-3 py-3.5 text-left text-sm font-medium text-gray-500",children:e.title}),(0,l.jsx)("td",{className:"px-3 py-3.5 text-left text-sm font-medium text-gray-500",children:e.legal_type.name}),(0,l.jsx)("td",{className:"px-3 py-3.5 text-left text-sm font-medium text-gray-500",children:e.department.name}),(0,l.jsx)("td",{className:"px-3 py-3.5 text-left text-sm font-medium text-gray-500",children:new Date(e.issue_date).toLocaleDateString()}),(0,l.jsx)("td",{className:"px-3 py-3.5 text-left text-sm font-medium text-gray-500",children:(0,l.jsx)("a",{href:e.doc_url,download:!0,children:"Download"})})]},e.id));return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(s.Z,{children:[(0,l.jsx)("section",{className:"pt-40 pb-12 -mt-24 bg-blueGray-100",children:(0,l.jsxs)("div",{className:"container",children:[(0,l.jsx)("h1",{className:"mb-5 text-2xl font-bold lg:text-5xl wow animate__animated animate__fadeIn animated",children:"Legal Resources"}),(0,l.jsxs)("ul",{className:"flex pb-12 text-sm text-gray-500 lg:text-sm wow animate__animated animate__fadeIn animated",children:[(0,l.jsxs)("li",{className:"inline-flex items-center",children:[(0,l.jsx)("a",{href:"#",className:"text-gray-800 hover:text-blue-500",children:"Home"}),(0,l.jsx)("svg",{fill:"currentColor",viewBox:"0 0 20 20",className:"w-auto h-5 text-gray-300",children:(0,l.jsx)("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})})]}),(0,l.jsxs)("li",{className:"inline-flex items-center",children:[(0,l.jsx)("a",{href:"#",className:"text-gray-800 hover:text-blue-500",children:"Resources"}),(0,l.jsx)("svg",{fill:"currentColor",viewBox:"0 0 20 20",className:"w-auto h-5 text-gray-300",children:(0,l.jsx)("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})})]}),(0,l.jsx)("li",{className:"inline-flex items-center text-gray-400",children:(0,l.jsx)("span",{children:"Legal Resources"})})]})]})}),(0,l.jsxs)("div",{className:"container py-4 mx-auto",children:[(0,l.jsxs)("div",{class:"grid grid-cols-4 gap-4 text-sm",children:[(0,l.jsxs)("div",{className:"grid-cols-none",children:[(0,l.jsx)("label",{htmlFor:"search",className:"block mb-2 font-bold text-gray-700",children:"Search"}),(0,l.jsx)("input",{type:"text",name:"search",id:"search",value:d,onChange:function(e){c(e.target.value)},placeholder:"Search by title, type, & department",className:"w-full px-4 py-2 text-sm border-gray-300 rounded-md focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none"})]}),(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)("label",{htmlFor:"legal_type",className:"block mb-2 font-bold text-gray-700",children:"Legal Type"}),(0,l.jsx)("div",{className:"relative",children:(0,l.jsxs)("select",{id:"legal_type",value:o,onChange:e=>m(e.target.value),className:"w-full h-10 px-5 pr-10 bg-white border-2 border-gray-200 rounded-lg appearance-none hover:border-gray-400 focus:outline-none",children:[(0,l.jsx)("option",{value:"",children:"All"}),S]})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"department",className:"block mb-2 font-bold text-gray-700",children:"Department"}),(0,l.jsx)("div",{className:"relative",children:(0,l.jsxs)("select",{id:"department",value:x,onChange:e=>u(e.target.value),className:"w-full h-10 px-5 pr-10 bg-white border-2 border-gray-200 rounded-lg appearance-none hover:border-gray-400 focus:outline-none",children:[(0,l.jsx)("option",{value:"",children:"All"}),D]})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"date",className:"block mb-2 font-bold text-gray-700",children:"Date"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"date",id:"issue_date",value:h,onChange:e=>p(e.target.value),className:"w-full h-10 px-5 pr-10 text-sm border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),""!==h&&(0,l.jsx)("button",{className:"absolute top-0 right-0 px-1 py-2.5 text-sm font-semibold text-gray-700 hover:text-gray-900 focus:text-gray-900",onClick:()=>p(""),children:"Clear"})]})]})]}),(0,l.jsx)("div",{className:"flow-root mt-8",children:(0,l.jsx)("div",{className:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,l.jsxs)("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:[f&&(0,l.jsx)("p",{children:"Loading..."}),y&&(0,l.jsx)("p",{children:y}),(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,l.jsx)("thead",{className:"bg-blueGray-100",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0",children:"No"}),(0,l.jsx)("th",{className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Title"}),(0,l.jsx)("th",{className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Type"}),(0,l.jsx)("th",{className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Department"}),(0,l.jsx)("th",{className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Issue Date"}),(0,l.jsx)("th",{className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Download"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-gray-200",children:k})]})]})})})]})]})})};t.default=d}},function(e){e.O(0,[449,590,655,293,774,888,179],function(){return e(e.s=5974)}),_N_E=e.O()}]);